<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.manyi.iw.contract.soa.server.mybatis.dao.read.custom.SaleContractOrderOutaccountDetailReadDao">

	<resultMap extends="com.manyi.iw.contract.soa.server.mybatis.dao.read.mbg.MBGSaleContractOrderOutaccountDetailReadDao.BaseResultMap"
			   id="getOrderAccountDetailResult"
			   type="com.manyi.iw.contract.soa.api.model.vo.sale.outaccount.GetOrderOutAccountResult$SaleContractOrderOutAccountDetailResult">
		<id column="od_id" />
		<association  columnPrefix="od_"
					  property="outaccountDetail"
					  resultMap="com.manyi.iw.contract.soa.server.mybatis.dao.read.mbg.MBGSaleContractOrderOutaccountDetailReadDao.BaseResultMap" />
		<association  columnPrefix="outtrade_"
					  property="outAccountTrade"
					  resultMap="com.manyi.iw.contract.soa.server.mybatis.dao.read.mbg.MBGSaleContractOrderOutAccountReadDao.BaseResultMap" />
	</resultMap>

	<select id="getOrderOutAccount" lang="velocity" resultMap="getOrderAccountDetailResult">
		SELECT
		#{prefix}("
		<include refid="com.manyi.iw.contract.soa.server.mybatis.dao.read.mbg.MBGSaleContractOrderOutaccountDetailReadDao.Base_Column_List" />
		" "," "od." "od_")
		,
		#{prefix}("
		<include refid='com.manyi.iw.contract.soa.server.mybatis.dao.read.mbg.MBGSaleContractOrderOutAccountReadDao.Base_Column_List'/>
		" "," "outtrade." "outtrade_")
		FROM
		iw_sale_contract_order_outaccount_detail od
		LEFT JOIN iw_sale_contract_order_out_account outtrade ON od.outAccountId = outtrade.id
		WHERE 1 = 1
		<include refid="getOrderOutAccountWhere"/>
		#{if}(${_parameter.orderBy})
			order by @{_parameter.orderBy}
		#{end}
	</select>

	<sql id="getOrderOutAccountWhere">
		#{if}(${_parameter.orderId})
			AND od.orderId = @{_parameter.orderId}
		#{end}
		#{if}(${_parameter.type})
			AND od.type = @{_parameter.type}
		#{end}
	</sql>

</mapper>